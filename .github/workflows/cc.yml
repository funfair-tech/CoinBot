name: Code Analysis

on:
  [push]

jobs:

  does-not-contain-secrets:

    runs-on: ubuntu-latest

    steps:
    - uses: actions/checkout@v2
      with:
        fetch-depth: 0
    - uses: zricethezav/gitleaks-action@master

  has-no-merge-conflicts:

    runs-on: ubuntu-latest

    steps:
    - uses: actions/checkout@v2
      with:
        fetch-depth: 0
    - uses: olivernybroe/action-conflict-finder@v1.1


  has-no-file-or-folder-case-sensitivity-issues:

    runs-on: ubuntu-latest

    steps:
    - uses: actions/checkout@v2
      with:
        fetch-depth: 0
    - uses: credfeto/action-case-checker@master

  raise-todo-issues:

    runs-on: ubuntu-latest

    steps:
    - uses: actions/checkout@v2
    - uses: "jamminroot/todo-2-gh-issue@master"
      with:
        TOKEN: ${{ secrets.GITHUB_TOKEN }}
        TODO_PATTERN: "(?<=\\/\\/ ?TODO[ :]).+"
        GH_LABEL: "TODO"
        TRIM: ",: \""
        TIMEOUT: 1000
        LINES_BEFORE: 2
        LINES_AFTER: 5
        LABELS_PATTERN: "(?<=\\[).+?(?=\\])"
        LABELS_REPLACE_PATTERN: "\\[(.+?)\\]"
        IGNORED_LINES_LENGTH: 255
      id: "todo"
